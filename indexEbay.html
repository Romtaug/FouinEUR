<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Recherche de produits sur eBay</title>
<style>
  table, th, td {
    border: 1px solid black;
    border-collapse: collapse;
  }
  th, td {
    padding: 10px;
  }
  th {
    text-align: left;
  }
</style>
</head>
<body>

<h1>Recherche de produits sur eBay</h1>

<label for="product-name">Rechercher un produit:</label>
<input type="text" id="product-name" name="product-name" value="glasses">
<button onclick="fetchProducts()">Rechercher</button>

<table id="products-table">
  <thead>
    <tr>
      <th>Produit</th>
      <th>Prix ($)</th>
      <th>URL</th>
    </tr>
  </thead>
  <tbody>
    <!-- Les produits seront ajoutÃ©s ici -->
  </tbody>
</table>

<script>
function fetchProducts() {
  var productName = document.getElementById('product-name').value;

  fetch("https://ebay-data-scraper.p.rapidapi.com/products?page_number=1&product_name=" + productName, {
    "method": "GET",
    "headers": {
      "X-RapidAPI-Key": "b9ee6a42a7mshe7386d9bc393dadp14419fjsn8ae618abbf42",
      "X-RapidAPI-Host": "ebay-data-scraper.p.rapidapi.com"
    }
  })
  .then(response => response.json())
  .then(response => {
    let products = response.products;
    let tableBody = document.getElementById('products-table').getElementsByTagName('tbody')[0];
    tableBody.innerHTML = ''; // Clear the table body
    
    // Iterate over the products and add to the table
    products.forEach(function(product) {
      let row = tableBody.insertRow();
      let cell1 = row.insertCell(0);
      let cell2 = row.insertCell(1);
      let cell3 = row.insertCell(2);

      cell1.innerHTML = product.title;
      cell2.innerHTML = product.price;
      cell3.innerHTML = `<a href="${product.link}" target="_blank">Lien</a>`;
    });
  })
  .catch(err => {
    console.error(err);
  });
}
</script>

</body>
</html>
